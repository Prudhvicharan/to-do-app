/* Container for tooltip positioning */
.container {
    position: relative;
    display: inline-block;
  }
  
  /* Base IconButton styles */
  .iconButton {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    
    font-family: inherit;
    font-weight: 500;
    text-decoration: none;
    white-space: nowrap;
    
    border: 1px solid transparent;
    background: none;
    cursor: pointer;
    transition: all var(--transition-fast);
    
    /* Remove default button styles */
    outline: none;
    
    /* Focus styles */
    &:focus-visible {
      outline: 2px solid var(--color-primary);
      outline-offset: 2px;
    }
    
    /* Disabled styles */
    &:disabled {
      cursor: not-allowed;
      opacity: 0.5;
    }
  }
  
  /* IconButton sizes */
  .iconButton--xs {
    width: 1.5rem;
    height: 1.5rem;
    border-radius: var(--border-radius-sm);
  }
  
  .iconButton--sm {
    width: 2rem;
    height: 2rem;
    border-radius: var(--border-radius-md);
  }
  
  .iconButton--md {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: var(--border-radius-md);
  }
  
  .iconButton--lg {
    width: 3rem;
    height: 3rem;
    border-radius: var(--border-radius-lg);
  }
  
  .iconButton--xl {
    width: 3.5rem;
    height: 3.5rem;
    border-radius: var(--border-radius-lg);
  }
  
  /* IconButton shapes */
  .iconButton--square {
    border-radius: 0;
  }
  
  .iconButton--rounded {
    /* Uses size-based border radius */
  }
  
  .iconButton--circle {
    border-radius: 50%;
  }
  
  /* IconButton variants */
  .iconButton--default {
    color: var(--color-gray-600);
    background-color: var(--color-gray-100);
    
    &:hover:not(:disabled) {
      color: var(--color-gray-900);
      background-color: var(--color-gray-200);
    }
    
    &:active:not(:disabled) {
      background-color: var(--color-gray-300);
      transform: scale(0.95);
    }
  }
  
  .iconButton--primary {
    color: var(--color-white);
    background-color: var(--color-primary);
    
    &:hover:not(:disabled) {
      background-color: var(--color-primary-hover);
    }
    
    &:active:not(:disabled) {
      background-color: var(--color-primary-active);
      transform: scale(0.95);
    }
  }
  
  .iconButton--secondary {
    color: var(--color-gray-700);
    background-color: var(--color-gray-200);
    border-color: var(--color-gray-300);
    
    &:hover:not(:disabled) {
      color: var(--color-gray-900);
      background-color: var(--color-gray-300);
      border-color: var(--color-gray-400);
    }
    
    &:active:not(:disabled) {
      background-color: var(--color-gray-400);
      transform: scale(0.95);
    }
  }
  
  .iconButton--danger {
    color: var(--color-white);
    background-color: var(--color-danger);
    
    &:hover:not(:disabled) {
      background-color: var(--color-danger-hover);
    }
    
    &:active:not(:disabled) {
      background-color: var(--color-danger-active);
      transform: scale(0.95);
    }
  }
  
  .iconButton--success {
    color: var(--color-white);
    background-color: #10b981;
    
    &:hover:not(:disabled) {
      background-color: #059669;
    }
    
    &:active:not(:disabled) {
      background-color: #047857;
      transform: scale(0.95);
    }
  }
  
  .iconButton--warning {
    color: var(--color-white);
    background-color: #f59e0b;
    
    &:hover:not(:disabled) {
      background-color: #d97706;
    }
    
    &:active:not(:disabled) {
      background-color: #b45309;
      transform: scale(0.95);
    }
  }
  
  .iconButton--ghost {
    color: var(--color-gray-600);
    background-color: transparent;
    
    &:hover:not(:disabled) {
      color: var(--color-gray-900);
      background-color: var(--color-gray-100);
    }
    
    &:active:not(:disabled) {
      background-color: var(--color-gray-200);
      transform: scale(0.95);
    }
  }
  
  .iconButton--outline {
    color: var(--color-gray-700);
    background-color: transparent;
    border-color: var(--color-gray-300);
    
    &:hover:not(:disabled) {
      color: var(--color-gray-900);
      background-color: var(--color-gray-50);
      border-color: var(--color-gray-400);
    }
    
    &:active:not(:disabled) {
      background-color: var(--color-gray-100);
      transform: scale(0.95);
    }
  }
  
  /* IconButton states */
  .iconButton--active {
    &.iconButton--default {
      color: var(--color-primary);
      background-color: var(--color-gray-200);
    }
    
    &.iconButton--ghost {
      color: var(--color-primary);
      background-color: var(--color-gray-100);
    }
    
    &.iconButton--outline {
      color: var(--color-primary);
      border-color: var(--color-primary);
      background-color: var(--color-gray-50);
    }
  }
  
  .iconButton--loading {
    cursor: not-allowed;
    
    .icon {
      opacity: 0;
    }
  }
  
  .iconButton--disabled {
    cursor: not-allowed;
    opacity: 0.5;
    transform: none !important;
  }
  
  /* Icon wrapper */
  .iconWrapper {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  }
  
  /* Icon styles */
  .icon {
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity var(--transition-fast);
  }
  
  .icon svg {
    width: 1em;
    height: 1em;
    flex-shrink: 0;
  }
  
  /* Icon sizes based on button size */
  .iconButton--xs .icon {
    font-size: 0.75rem;
  }
  
  .iconButton--sm .icon {
    font-size: 0.875rem;
  }
  
  .iconButton--md .icon {
    font-size: 1rem;
  }
  
  .iconButton--lg .icon {
    font-size: 1.125rem;
  }
  
  .iconButton--xl .icon {
    font-size: 1.25rem;
  }
  
  /* Loading spinner */
  .spinner {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    animation: spin 1s linear infinite;
  }
  
  .spinner circle {
    animation: dash 1.5s ease-in-out infinite;
  }
  
  /* Tooltip */
  .tooltip {
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    z-index: 50;
    
    padding: var(--spacing-xs) var(--spacing-sm);
    background-color: var(--color-gray-900);
    color: var(--color-white);
    font-size: 0.75rem;
    font-weight: 500;
    line-height: 1.25;
    border-radius: var(--border-radius-md);
    white-space: nowrap;
    pointer-events: none;
    
    animation: tooltipFadeIn 150ms ease-out;
  }
  
  .tooltipArrow {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 4px solid transparent;
    border-right: 4px solid transparent;
    border-top: 4px solid var(--color-gray-900);
  }
  
  /* Animations */
  @keyframes spin {
    from {
      transform: translate(-50%, -50%) rotate(0deg);
    }
    to {
      transform: translate(-50%, -50%) rotate(360deg);
    }
  }
  
  @keyframes dash {
    0% {
      stroke-dasharray: 1, 150;
      stroke-dashoffset: 0;
    }
    50% {
      stroke-dasharray: 90, 150;
      stroke-dashoffset: -35;
    }
    100% {
      stroke-dasharray: 90, 150;
      stroke-dashoffset: -124;
    }
  }
  
  @keyframes tooltipFadeIn {
    from {
      opacity: 0;
      transform: translateX(-50%) translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
  }
  
  /* Dark theme */
  [data-theme="dark"] {
    .iconButton--default {
      color: var(--color-gray-400);
      background-color: var(--color-gray-700);
      
      &:hover:not(:disabled) {
        color: var(--color-gray-200);
        background-color: var(--color-gray-600);
      }
      
      &:active:not(:disabled) {
        background-color: var(--color-gray-500);
      }
    }
    
    .iconButton--secondary {
      color: var(--color-gray-300);
      background-color: var(--color-gray-600);
      border-color: var(--color-gray-500);
      
      &:hover:not(:disabled) {
        color: var(--color-gray-100);
        background-color: var(--color-gray-500);
        border-color: var(--color-gray-400);
      }
      
      &:active:not(:disabled) {
        background-color: var(--color-gray-400);
      }
    }
    
    .iconButton--ghost {
      color: var(--color-gray-400);
      
      &:hover:not(:disabled) {
        color: var(--color-gray-200);
        background-color: var(--color-gray-700);
      }
      
      &:active:not(:disabled) {
        background-color: var(--color-gray-600);
      }
    }
    
    .iconButton--outline {
      color: var(--color-gray-300);
      border-color: var(--color-gray-600);
      
      &:hover:not(:disabled) {
        color: var(--color-gray-100);
        background-color: var(--color-gray-800);
        border-color: var(--color-gray-500);
      }
      
      &:active:not(:disabled) {
        background-color: var(--color-gray-700);
      }
    }
    
    .iconButton--active {
      &.iconButton--default {
        color: var(--color-primary);
        background-color: var(--color-gray-600);
      }
      
      &.iconButton--ghost {
        color: var(--color-primary);
        background-color: var(--color-gray-700);
      }
      
      &.iconButton--outline {
        color: var(--color-primary);
        border-color: var(--color-primary);
        background-color: var(--color-gray-800);
      }
    }
    
    .tooltip {
      background-color: var(--color-gray-700);
      color: var(--color-gray-100);
    }
    
    .tooltipArrow {
      border-top-color: var(--color-gray-700);
    }
  }
  
  /* Responsive adjustments */
  @media (max-width: 640px) {
    .iconButton--xl {
      width: 3rem;
      height: 3rem;
    }
    
    .iconButton--lg {
      width: 2.75rem;
      height: 2.75rem;
    }
    
    .iconButton--md {
      width: 2.25rem;
      height: 2.25rem;
    }
    
    .tooltip {
      font-size: 0.6875rem;
      padding: 0.125rem var(--spacing-xs);
    }
  }
  
  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .iconButton {
      border-width: 2px;
    }
    
    .iconButton--outline {
      border-width: 2px;
    }
    
    .iconButton:focus-visible {
      outline-width: 3px;
    }
  }
  
  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .iconButton {
      transition: none;
    }
    
    .iconButton:active {
      transform: none;
    }
    
    .spinner,
    .spinner circle {
      animation: none;
    }
    
    .tooltip {
      animation: none;
    }
  }